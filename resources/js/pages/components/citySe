import React, { useState } from "react";
import { TextField, IconButton, Toolbar, InputAdornment, Avatar } from "@mui/material";
import { Notifications, ArrowDropDown } from "@mui/icons-material";
import SearchIcon from "@mui/icons-material/Search";
import { cityCoordinates } from "./cities";

const CitySearchToolbar = ({ setSelectedCity, fetchWeatherData }) => {
  const [searchValue, setSearchValue] = useState("");

  const handleSearch = (event) => {
    const query = event.target.value;
    setSearchValue(query);

    if (cityCoordinates[query]) {
      setSelectedCity(query);
      fetchWeatherData(cityCoordinates[query]);
    }
  };

  return (
    <Toolbar>
      <TextField
        fullWidth
        placeholder="Search city"
        variant="outlined"
        size="small"
        value={searchValue}
        onChange={handleSearch}
        sx={{
          backgroundColor: "#2e2e2e",
          borderRadius: "10px",
          input: { color: "#fff" },
        }}
        InputProps={{
          startAdornment: (
            <InputAdornment position="start">
              <SearchIcon sx={{ color: "#aaa" }} />
            </InputAdornment>
          ),
        }}
      />
      <IconButton sx={{ color: "#fff", ml: 1 }}>
        <Notifications />
      </IconButton>
      <IconButton sx={{ color: "#fff" }}>
        <Avatar src="/path-to-profile-pic.jpg" />
      </IconButton>
      <IconButton sx={{ color: "#fff" }}>
        <ArrowDropDown />
      </IconButton>
    </Toolbar>
  );
};

export default CitySearchToolbar;